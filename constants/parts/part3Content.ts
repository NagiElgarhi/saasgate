import { Part, ContentType } from '../../types';

export const part3: Part = {
  id: 'part3',
  partTitle: 'ุงูุจุงุจ ุงูุซุงูุซ: ุงูุชุตููู ุงูุชููู ุงูุนููู',
  icon: '๐๏ธ',
  chapters: [
    {
      id: 'part3_chapter1',
      chapterTitle: 'ุงููุตู 3: ุงูุชุตููู ุงูุชููู ููุธุงู SaaS โ ุจููุฉ Multi-Tenant ูู ุงูุฃูู ุฅูู ุงููุงุก',
      sections: [
        {
          id: 'part3_ch1_sec1',
          title: 'ููุฏูุฉ: ููุงุฐุง ุงูุชุตููู ุงูุชููู ูู ุญุฌุฑ ุงูุฃุณุงุณุ',
          icon: '๐',
          content: [
            {
              type: ContentType.PARAGRAPH,
              text: 'ุฅุฐุง ููุช ุชุจูู ูุธุงู SaaSุ ูุฃูุช ูุง ุชูุทููุฑ ุชุทุจูููุง ุนุงุฏููุง. ุฃูุช ุชูุทููุฑ <b>ูุธุงููุง ูุฑูุฒููุง ูุณุชุถูู ุขูุงู ุงูุนููุงุก (ุงููุณุชุฃุฌุฑูู - Tenants)</b>ุ ููููุฏูู ููู ููุณ ุงูุฎุฏูุฉุ ูุน <b>ุนุฒู ุชุงู ูุจูุงูุงุชูู (Data Isolation)</b>ุ ูุถูุงู <b>ุงูุฃุฏุงุก (Performance)ุ ุงูุฃูุงู (Security)ุ ูุงูุชูุณุน (Scalability)</b>. ุงูุณุคุงู ุงูุฃูู ููุณ: "ูู ูููููู ุจูุงุก ูุฐุง ุงููุธุงูุ" ุจู: "ูู ูููููู ุจูุงุคู ุจุทุฑููุฉ ุชููููู ูู ุงูููู ุฅูู ููููู ูุณุชุฎุฏู ุฏูู ุงูุงูููุงุฑุ"',
            },
            {
                type: ContentType.PARAGRAPH,
                text: 'ูู ูุฐุง ุงููุตูุ ุณูุบูุต ูู <b>ุงูุนูู ุงูุชููู ูุชุตููู ูุธุงู SaaS</b>ุ ูุน ุงูุชุฑููุฒ ุนูู <b>ุจููุฉ ูุชุนุฏุฏุฉ ุงููุณุชุฃุฌุฑูู (Multi-Tenant Architecture)</b> โ ููู ุงูููุจ ุงููุงุจุถ ูุฃู ูุธุงู SaaS ูุงุฌุญ. ูุฐุง ููุณ ูุฌุฑุฏ ุฎูุงุฑ ุชูููุ ุจู ูู ูุฑุงุฑ ุงุณุชุฑุงุชูุฌู ุณูุญุฏุฏ ุชูููุฉ ุชุดุบูููุ ููุณุชูู ุฃูุงููุ ููุฏุฑุชู ุนูู ุงูููู ูู ุงููุณุชูุจู. ุณูุชูุงูู:'
            },
            {
              type: ContentType.LIST_UNORDERED,
              items: [
                '<b>ูุง ูุนูู Multi-Tenantุ</b> ูููู ูุฎุชูู ุนู ุงูุฃูุธูุฉ ุงูุชูููุฏูุฉ.',
                '<b>ุงูููุงุฐุฌ ุงูุซูุงุซุฉ ูุนุฒู ุงูุจูุงูุงุช</b> (Shared DBุ Schema per Tenantุ Database per Tenant) ูุน ุชุดุจููุงุช ุนูููุฉ.',
                '<b>ููู ุชูุตูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database)ุ ุงููุงุฌูุฉ ุงูุฎูููุฉ (Backend)ุ ูุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)</b> ูุฏุนู ุงููุณุชุฃุฌุฑูู.',
                '<b>ุฃููุงุฏ ุนูููุฉ ูููุตูุฉ</b> ุจูุบุงุช ูุชุนุฏุฏุฉ (Pythonุ JavaScriptุ SQLุ Docker).',
                '<b>ุชุญููู ูููุฎุงุทุฑ ุงูุดุงุฆุนุฉ</b> ูุซู "ูุดููุฉ ุงูุฌุงุฑ ุงููุฒุนุฌ (Noisy Neighbor)" ู "ุฌุญูู ุชุฑุญูู ุงูุจูุงูุงุช (Migration Hell)".',
                '<b>ุฃุฏูุงุชุ ููุชุจุงุชุ ูุฃูุถู ุงูููุงุฑุณุงุช</b> ูุชุทุจูู ุงูุฃูุงู ูุงูุชูุณุน.',
              ],
            },
            {
              type: ContentType.PARAGRAPH,
              text: 'ุจุนุฏ ูุฑุงุกุฉ ูุฐุง ุงููุตูุ ุณุชููู ูุงุฏุฑูุง ุนูู ุงุชุฎุงุฐ ูุฑุงุฑุงุช ูุนูุงุฑูุฉ ูุณุชููุฑุฉุ ูุชุตููู ูููู ูุธุงู ูุงุจู ููุชุทููุฑุ ูุชุฌูุจ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ุงูุชู ุชูุฏููุฑ ุงูุฃูุธูุฉ ูู ูุฑุญูุฉ ุงูููู.',
            },
          ]
        },
        {
            id: 'part3_ch1_sec2',
            title: 'ูุง ูู Multi-Tenant Architectureุ ุงูุชุนุฑูู ูุงูุฃุณุงุณูุงุช',
            icon: '๐',
            content: [
                { type: ContentType.HEADING3, text: '๐ ุงูุชุนุฑูู ุงูุจุณูุท ูุงูููุณุน' },
                { type: ContentType.PARAGRAPH, text: '<b>ุจููุฉ ูุชุนุฏุฏุฉ ุงููุณุชุฃุฌุฑูู (Multi-Tenant Architecture)</b> ูู ูููุฐุฌ ุชุตููู ุจุฑูุฌู ูููููู <b>ุชุทุจูููุง ูุงุญุฏูุง ูู ุฎุฏูุฉ ุนุฏุฉ ุนููุงุก (ูุณุชุฃุฌุฑูู - Tenants)</b>ุ ูุน <b>ุนุฒู ุจูุงูุงุชูู (Data Isolation)</b> ุนู ุจุนุถูู ุงูุจุนุถ. ุงููุณุชุฃุฌุฑ (Tenant) ูู ุนููู ุฃู ููุธูุฉ ุชุณุชุฎุฏู ุงููุธุงู (ูุซู ุดุฑูุฉุ ูุฑููุ ุฃู ูุคุณุณุฉ ุชุนููููุฉ).'},
                { type: ContentType.NOTE, title: '๐น ุชุดุจูู ุจุณูุท: ุงูุนูุงุฑุฉ ุงูุณูููุฉ ููุงุจู ุงููููุง ุงูุฎุงุตุฉ', text: '- <b>ุงููุณุชุฃุฌุฑ ุงููุงุญุฏ (Single-Tenant)</b> ูุดุจู ุงูุชูุงู ูููุง ุฎุงุตุฉ ุจู. ุชุญุตู ุนูู ุฃูุตู ุฏุฑุฌุงุช ุงูุฎุตูุตูุฉ ูุงูุฃูุงูุ ูุชุชุญูู ูู ูู ุดูุกุ ููู ุงูุชูููุฉ ุงูุฃูููุฉ ูุชูุงููู ุงูุตูุงูุฉ ุจุงูุธุฉ ุฌุฏุงู. ูู ุนููู ูุญุตู ุนูู ูุณุฎุชู ุงูุฎุงุตุฉ ูู ุงูุชุทุจูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุฎุงุฏู.\n- <b>ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑูู (Multi-Tenant)</b> ูุดุจู ุงูุนูุด ูู ุนูุงุฑุฉ ุณูููุฉ. ุฌููุน ุงูุณูุงู ูุชุดุงุฑููู ุงููุจูู ููุณู (ุงูุจููุฉ ุงูุชุญุชูุฉ ูุงูุชุทุจูู)ุ ูุงููุตุนุฏ (ุงูููุงุฑุฏ)ุ ููู ููู ุณุงูู ุดูุชู ุงูุฎุงุตุฉ ูุจุงุจ ูููู (ุนุฒู ุงูุจูุงูุงุช). ุงูุชูููุฉ ุฃูู ุจูุซูุฑ ูุฃููุง ููุฒุนุฉ ุนูู ุงูุฌููุนุ ูุงูุตูุงูุฉ ูุฑูุฒูุฉ ููุณุคูููุฉ ุงููุงูู (ูุฒูุฏ ุงูุฎุฏูุฉ).'},
                 { type: ContentType.HEADING3, text: '๐ ุงููุฑู ุจูู Single-Tenant ู Multi-Tenant' },
                 { type: ContentType.PARAGRAPH, text: `<div class="my-6 grid grid-cols-1 md:grid-cols-2 gap-8 font-sans">
    <!-- Single-Tenant Card -->
    <div class="bg-stone-50 border-2 border-stone-200 rounded-xl p-6 shadow-md flex flex-col">
        <div class="flex items-center gap-4 mb-4">
            <div class="bg-sky-100 text-sky-700 p-3 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
            </div>
            <h3 class="text-2xl font-bold text-stone-800">Single-Tenant (ุงููููุง ุงูุฎุงุตุฉ)</h3>
        </div>
        <ul class="space-y-3 text-stone-700 flex-grow">
            <li class="flex items-start gap-3"><span class="text-green-500 font-bold">โ</span><div><strong>ุงูุฃูุงู:</strong> ุนุฒู ูุงูู ููุจูุงูุงุชุ ูุซุงูู ููุจูุงูุงุช ุงูุญุณุงุณุฉ.</div></li>
            <li class="flex items-start gap-3"><span class="text-green-500 font-bold">โ</span><div><strong>ุงูุชุญูู:</strong> ุณูุทุฑุฉ ูุงููุฉ ุนูู ุงูุจูุฆุฉ ูุงูุชุญุฏูุซุงุช ูุงูุชุฎุตูุต.</div></li>
            <li class="flex items-start gap-3"><span class="text-green-500 font-bold">โ</span><div><strong>ุงูุฃุฏุงุก:</strong> ูุง ููุฌุฏ ุชุฃุซูุฑ "ุงูุฌุงุฑ ุงููุฒุนุฌ"ุ ุงูููุงุฑุฏ ูุฎุตุตุฉ ุจุงููุงูู.</div></li>
            <li class="flex items-start gap-3"><span class="text-red-500 font-bold">โ</span><div><strong>ุงูุชูููุฉ:</strong> ุจุงูุธุฉ ุฌุฏูุง (ุฎูุงุฏูุ ุชุฑุงุฎูุตุ ุตูุงูุฉ ููู ุนููู).</div></li>
            <li class="flex items-start gap-3"><span class="text-red-500 font-bold">โ</span><div><strong>ุงูุตูุงูุฉ:</strong> ูุนูุฏุฉ ููุณุชูููุฉ ููููุชุ ูุฌุจ ุชุญุฏูุซ ูู ูุณุฎุฉ ุนูู ุญุฏุฉ.</div></li>
        </ul>
    </div>

    <!-- Multi-Tenant Card -->
    <div class="bg-stone-50 border-2 border-amber-400 rounded-xl p-6 shadow-lg flex flex-col">
        <div class="flex items-center gap-4 mb-4">
            <div class="bg-amber-100 text-amber-700 p-3 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>
            </div>
            <h3 class="text-2xl font-bold text-stone-800">Multi-Tenant (ุงูุนูุงุฑุฉ ุงูุณูููุฉ)</h3>
        </div>
        <ul class="space-y-3 text-stone-700 flex-grow">
            <li class="flex items-start gap-3"><span class="text-green-500 font-bold">โ</span><div><strong>ุงูุชูููุฉ:</strong> ููุฎูุถุฉ ุฌุฏูุงุ ุญูุซ ูุชู ุชูุงุณู ุชูุงููู ุงูุจููุฉ ุงูุชุญุชูุฉ ูุงูุตูุงูุฉ.</div></li>
            <li class="flex items-start gap-3"><span class="text-green-500 font-bold">โ</span><div><strong>ุงูุตูุงูุฉ:</strong> ูุฑูุฒูุฉ ูุณููุฉุ ุชุญุฏูุซ ูุงุญุฏ ูุตู ูุฌููุน ุงูุนููุงุก ููุฑูุง.</div></li>
            <li class="flex items-start gap-3"><span class="text-green-500 font-bold">โ</span><div><strong>ุงูุชูุณุน:</strong> ุฃุณูู ูุฃุณุฑุน ูู ุฅุถุงูุฉ ุนููุงุก ุฌุฏุฏ.</div></li>
            <li class="flex items-start gap-3"><span class="text-red-500 font-bold">โ</span><div><strong>ุงูุฃูุงู:</strong> ูุชุทูุจ ุชุตููููุง ุฏููููุง ูุนุฒู ุงูุจูุงูุงุช (ูุซู RLS) ูููุน ุงูุชุณุฑุจ.</div></li>
            <li class="flex items-start gap-3"><span class="text-red-500 font-bold">โ</span><div><strong>ุงูุชุญูู:</strong> ุชุฎุตูุต ูุญุฏูุฏุ ุฌููุน ุงูุนููุงุก ูุณุชุฎุฏููู ููุณ ูุณุฎุฉ ุงูุจุฑูุงูุฌ.</div></li>
        </ul>
    </div>
</div>`},
            ]
        },
        {
            id: 'part3_ch1_sec3',
            title: 'ุงูููุงุฐุฌ ุงูุซูุงุซุฉ ูุนุฒู ุงูุจูุงูุงุช: ุดูุฉุ ุชุงูู ูุงูุณุ ุฃู ูููุงุ',
            icon: '๐งฑ',
            content: [
                { type: ContentType.PARAGRAPH, text: 'ุงุฎุชูุงุฑ ูููุฐุฌ ุนุฒู ุงูุจูุงูุงุช ูู ุงููุฑุงุฑ ุงููุนูุงุฑู ุงูุฃูู ูู ูุธุงูู. ูุง ููุฌุฏ ุญู "ุฃูุถู" ููุฌููุนุ ุจู ูู ููุงุฒูุฉ ุจูู ุงูุชูููุฉ ูุงูุฃูุงู ูุณูููุฉ ุงูุฅุฏุงุฑุฉ. ุฏุนูุง ูุณุชูุดู ุงูููุงุฐุฌ ุงูุซูุงุซุฉ ุจุงุณุชุฎุฏุงู ุชุดุจููุงุช ูู ุนุงูู ุงูุนูุงุฑุงุช.' },
                { type: ContentType.HEADING3, text: '๐ ุงููููุฐุฌ 1: ูุงุนุฏุฉ ุจูุงูุงุช ูุดุชุฑูุฉุ ูุฎุทุท ูุดุชุฑู (Shared Database, Shared Schema) (ูููุฐุฌ ุงูุดูุฉ)' },
                { type: ContentType.PARAGRAPH, text: '<b>ุงููุตู:</b> ุฌููุน ุงููุณุชุฃุฌุฑูู ูุณุชุฎุฏููู ููุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุณ ุงูุฌุฏุงูู. ูุชู ุงูุชูููุฒ ุจูููู ุนุจุฑ ุญูู `tenant_id` ูู ูู ุฌุฏูู. ูุฐุง ูู ุงููููุฐุฌ ุงูุฃูุซุฑ ุดููุนูุง ููุดุฑูุงุช ุงููุงุดุฆุฉ.' },
                {
                    type: ContentType.CODE_EXPLANATION,
                    language: 'sql',
                    codeTitle: 'ุฌุฏูู ุงูููุงู ูุน tenant_id',
                    code: `CREATE TABLE tasks (
    id UUID PRIMARY KEY,
    title VARCHAR(200),
    user_id UUID REFERENCES users(id),
    tenant_id UUID NOT NULL, -- ุงูุนููุฏ ุงูุญุงุณู
    status VARCHAR(20) DEFAULT 'pending'
);

-- ุงูุงุณุชุนูุงู ุงูุขูู
SELECT * FROM tasks WHERE tenant_id = 'uuid-for-tenant-A';

-- ุงูุงุณุชุนูุงู ุงูุฎุทูุฑ (ุชุณุฑูุจ ุจูุงูุงุช)
SELECT * FROM tasks; -- ูุนุฑุถ ููุงู ุฌููุน ุงููุณุชุฃุฌุฑูู!`,
                    explanations: [
                        { lines: "5", explanation: "ูุฐุง ุงูุนููุฏ ูู ููุชุงุญ ุงูุนุฒู. ูู ุตู ูู ุงูุฌุฏูู ูุฌุจ ุฃู ูููู ูุฑุชุจุทูุง ุจูุณุชุฃุฌุฑ ูุนูู." },
                        { lines: "9", explanation: "ุฃู ุงุณุชุนูุงู ูุฌูุจ ุงูุจูุงูุงุช ูุฌุจ ุฃู ูุชุถูู ุดุฑุท `WHERE tenant_id = ?` ูุถูุงู ุนุฏู ุฑุคูุฉ ุจูุงูุงุช ูุณุชุฃุฌุฑ ุขุฎุฑ." },
                        { lines: "12", explanation: "ูุณูุงู ูุฐุง ุงูุดุฑุท ูู ุงูุฎุทุฃ ุงูุฃููู ุงูุฃูุซุฑ ุดููุนูุง ูุฎุทูุฑุฉ ูู ูุฐุง ุงููููุฐุฌ." }
                    ]
                },
                {
                    type: ContentType.PARAGRAPH,
                    text: '<b>ุดุฑุญ ุงูููุฏ:</b> ููุถุญ ูุฐุง ุงูููุฏ ุฃุจุณุท ูููุฐุฌ ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑููุ ุญูุซ ูุชู ุชูููุฒ ุจูุงูุงุช ูู ุนููู ุจุงุณุชุฎุฏุงู ุนููุฏ `tenant_id`. ุฃูููุชู ุชููู ูู ุจุณุงุทุชู ูุชูููุชู ุงูููุฎูุถุฉุ ููุง ูุฌุนูู ุงูุฎูุงุฑ ุงูุฃูุซู ููููุชุฌุงุช ุงูุฃูููุฉ (MVPs). ููุณุชุฎุฏู ูุฐุง ุงูููุท ูู ูุนุธู ุฃูุธูุฉ SaaS ูู ูุฑุงุญููุง ุงููุจูุฑุฉุ ููููู ูุชุทูุจ ุงูุถุจุงุทูุง ุจุฑูุฌููุง ุตุงุฑููุง ูุถูุงู ุฅุถุงูุฉ ุดุฑุท `WHERE tenant_id` ูู ูู ุงุณุชุนูุงู ูุชุฌูุจ ุชุณุฑุจ ุงูุจูุงูุงุช.'
                },
                { type: ContentType.HEADING4, text: 'ูุชู ุชุฎุชุงุฑ ูุฐุง ุงููููุฐุฌุ' },
                { type: ContentType.LIST_UNORDERED, items: [
                    "<b>ุนูุฏ ุฅุทูุงู ููุชุฌู ุงูุฃููู (MVP):</b> ูุฃูู ุงูุฃุณุฑุน ูุงูุฃูู ุชูููุฉ ูู ุงูุชูููุฐ.",
                    "<b>ููุชุทุจููุงุช ุงูููุฌูุฉ ูููุณุชููู (B2C):</b> ุญูุซ ูููู ูุณุชูู ุญุณุงุณูุฉ ุงูุจูุงูุงุช ุฃูู ููุงุฑูุฉ ุจุงูุดุฑูุงุช.",
                    "<b>ุนูุฏูุง ุชููู ุงูููุฒุงููุฉ ูุญุฏูุฏุฉ:</b> ูุชุทูุจ ุฃูู ูุฏุฑ ูู ุงูููุงุฑุฏ ุงูุชุดุบูููุฉ.",
                ]},
                { type: ContentType.HEADING4, text: 'ุงููุฎุงุทุฑ ุงูุดุงุฆุนุฉ' },
                { type: ContentType.DEFINITION_LIST, definitionItems: [
                    { term: 'ุชุณุฑุจ ุงูุจูุงูุงุช (Data Leakage)', definition: 'ุฎุทุฃ ุจุฑูุฌู ูุงุญุฏ ูู ุงุณุชุนูุงู ูููู ุฃู ูุนุฑุถ ุจูุงูุงุช ุฌููุน ุนููุงุฆู. ูุชุทูุจ ุงูุถุจุงุทูุง ุตุงุฑููุง ูู ูุฑูู ุงูุชุทููุฑ ุฃู ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุฃูุงู ูุชูุฏูุฉ ูุซู RLS.' },
                    { term: 'ูุดููุฉ ุงูุฌุงุฑ ุงููุฒุนุฌ (Noisy Neighbor)', definition: 'ุฅุฐุง ูุงู ุฃุญุฏ ุงููุณุชุฃุฌุฑูู ุจุชุดุบูู ุงุณุชุนูุงูุงุช ุซูููุฉ ุฌุฏูุงุ ูุฅูู ูุจุทุฆ ุฃุฏุงุก ุงูุชุทุจูู ูุฌููุน ุงููุณุชุฃุฌุฑูู ุงูุขุฎุฑูู ูุฃููู ูุชุดุงุฑููู ููุณ ููุงุฑุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช.' },
                ]},
                { type: ContentType.HEADING3, text: '๐ ุงููููุฐุฌ 2: ูุงุนุฏุฉ ุจูุงูุงุช ูุดุชุฑูุฉุ ูุฎุทุทุงุช ูููุตูุฉ (Shared Database, Separate Schemas) (ูููุฐุฌ ุงูุชุงูู ูุงูุณ)' },
                { type: ContentType.PARAGRAPH, text: '<b>ุงููุตู:</b> ููุณ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููู ููู ูุณุชุฃุฌุฑ <b>ูุฎุทุท (Schema) ูููุตู</b> ูุญุชูู ุนูู ุฌุฏุงููู ุงูุฎุงุตุฉ. ูุฐุง ูููุฑ ุนุฒูุงู ููุทูููุง ููููุง ุฏุงุฎู ูุงุนุฏุฉ ุจูุงูุงุช ูุดุชุฑูุฉ.' },
                 { type: ContentType.CODE_EXPLANATION,
                    language: 'sql',
                    codeTitle: 'ุฅูุดุงุก ูุฎุทุทุงุช ูููุตูุฉ',
                    code: `-- ุฅูุดุงุก ูุฎุทุท ููู ูุณุชุฃุฌุฑ
CREATE SCHEMA tenant_acme;
CREATE SCHEMA tenant_innovate;

-- ุฅูุดุงุก ุฌุฏูู ูู ูู ูุฎุทุท
CREATE TABLE tenant_acme.tasks (...);
CREATE TABLE tenant_innovate.tasks (...);

-- ุชุบููุฑ ูุณุงุฑ ุงูุจุญุซ ูุชูุฌูู ุงูุงุณุชุนูุงูุงุช
SET search_path TO tenant_acme;
SELECT * FROM tasks; -- ุณููุฑุฃ ูู tenant_acme.tasks`,
                    explanations: [
                        { lines: "2-3", explanation: "ูุชู ุฅูุดุงุก ูุณุงุญุฉ ุงุณู (namespace) ูููุตูุฉ ููู ูุณุชุฃุฌุฑ ุฏุงุฎู ูุงุนุฏุฉ ุงูุจูุงูุงุช." },
                        { lines: "6-7", explanation: "ูุชู ุฅูุดุงุก ููุณ ุจููุฉ ุงูุฌุฏุงูู ุฏุงุฎู ูู ูุฎุทุทุ ููุง ูุคุฏู ุฅูู ุชูุฑุงุฑ ุงููููู ูููู ููุณ ุงูุจูุงูุงุช." },
                        { lines: "10-11", explanation: "ูุจู ูู ุงุณุชุนูุงูุ ูุฌุจ ุนูู ุงูุชุทุจูู ุชุญุฏูุฏ ุงููุฎุทุท ุงูุฐู ุณูุนูู ุนููู. ูุฐุง ูุถูู ุทุจูุฉ ูู ุงูุฃูุงู ููููุน ุงูุญุงุฌุฉ ุฅูู `WHERE tenant_id`." },
                    ]
                },
                {
                    type: ContentType.PARAGRAPH,
                    text: '<b>ุดุฑุญ ุงูููุฏ:</b> ูุดุฑุญ ูุฐุง ุงูููุฏ ูููุฐุฌ ุงูุนุฒู ุนุจุฑ ุงููุฎุทุทุงุช (Schemas)ุ ุญูุซ ูุญุตู ูู ุนููู ุนูู ูุฌููุนุฉ ุฌุฏุงููู ุงูุฎุงุตุฉ. ูุงุฆุฏุชู ูู ุชูููุฑ ุนุฒู ููุทูู ุฃููู ูู ุงููููุฐุฌ ุงููุดุชุฑูุ ููุง ูููู ูู ุฎุทุฑ ุชุณุฑุจ ุงูุจูุงูุงุช. ููุณุชุฎุฏู ูุฐุง ุงูููุท ูู ุชุทุจููุงุช B2B ุงูุชู ุชุชุทูุจ ุฏุฑุฌุฉ ุฃุนูู ูู ุงูุฃูุงู ูููููุง ูุง ุชุฒุงู ุชุฑูุฏ ุงูุงุณุชูุงุฏุฉ ูู ูุงุนุฏุฉ ุจูุงูุงุช ูุงุญุฏุฉ ูุณูููุฉ ุงูุฅุฏุงุฑุฉ.'
                },
                { type: ContentType.HEADING4, text: 'ูุชู ุชุฎุชุงุฑ ูุฐุง ุงููููุฐุฌุ' },
                { type: ContentType.LIST_UNORDERED, items: [
                    "<b>ุชุทุจููุงุช B2B:</b> ุนูุฏูุง ูุทูุจ ุงูุนููุงุก ุฏุฑุฌุฉ ุฃุนูู ูู ุนุฒู ุงูุจูุงูุงุช.",
                    "<b>ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ูุณุฎ ุงุญุชูุงุทู ููู ุนููู ุนูู ุญุฏุฉ:</b> ููููู ุจุณูููุฉ ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุฎุทุท ูุงุญุฏ.",
                    "<b>ุนูุฏูุง ุชููู ููุงู ุงุฎุชูุงูุงุช ุทูููุฉ ูู ุจููุฉ ุงูุจูุงูุงุช ุจูู ุงูุนููุงุก.</b>",
                ]},
                 { type: ContentType.HEADING4, text: 'ุงููุฎุงุทุฑ ุงูุดุงุฆุนุฉ' },
                { type: ContentType.DEFINITION_LIST, definitionItems: [
                    { term: 'ุฌุญูู ุชุฑุญูู ุงูุจูุงูุงุช (Migration Hell)', definition: 'ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุชุบููุฑ ุจููุฉ ุฌุฏูู (ูุซู ุฅุถุงูุฉ ุนููุฏ)ุ ูุฌุจ ุนููู ุชุทุจูู ูุฐุง ุงูุชุบููุฑ ุนูู ูุฆุงุช ุฃู ุขูุงู ุงููุฎุทุทุงุช. ูุฐู ุนูููุฉ ูุนูุฏุฉ ูุจุทูุฆุฉ ููุญูููุฉ ุจุงููุฎุงุทุฑ.' },
                    { term: 'ุญุฏูุฏ ููุงุนุฏ ุงูุจูุงูุงุช', definition: 'ุจุนุถ ุฃูุธูุฉ ููุงุนุฏ ุงูุจูุงูุงุช ูุฏููุง ุญุฏ ุฃูุตู ูุนุฏุฏ ุงููุฎุทุทุงุชุ ููุง ูุฏ ูุญุฏ ูู ูุฏุฑุชู ุนูู ุงูุชูุณุน.' },
                ]},
                { type: ContentType.HEADING3, text: '๐ ุงููููุฐุฌ 3: ูุงุนุฏุฉ ุจูุงูุงุช ูููุตูุฉ (Separate Database) (ูููุฐุฌ ุงููููุง ุงูุฎุงุตุฉ)' },
                { type: ContentType.PARAGRAPH, text: '<b>ุงููุตู:</b> ูู ูุณุชุฃุฌุฑ ูู <b>ูุงุนุฏุฉ ุจูุงูุงุช ูุงููุฉ ูููุตูุฉ</b>ุ ููุฏ ุชููู ุนูู ุฎุงุฏู ูููุตู. ูุฐุง ูููุฑ ุฃุนูู ูุณุชูู ูู ุงูุนุฒู ูุงูุฃูุงู ูุงูุฃุฏุงุก.' },
                 { type: ContentType.CODE_EXPLANATION,
                    language: 'python',
                    codeTitle: 'ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช ูุฎุชููุฉ',
                    code: `# ุฏุงูุฉ ููุญุตูู ุนูู ุงุชุตุงู ุจุงููุงุนุฏุฉ ุงูููุงุณุจุฉ
def get_db_connection(tenant_id):
    # ูุชู ุชุฎุฒูู ูุนูููุงุช ุงูุงุชุตุงู ูู ุฌุฏูู ูุฑูุฒู
    tenant_config = get_tenant_config_from_central_db(tenant_id)

    db_url = (f"postgresql://{tenant_config.user}:"
              f"{tenant_config.password}@"
              f"{tenant_config.host}/"
              f"{tenant_config.db_name}")

    return create_engine(db_url)`,
                    explanations: [
                        { lines: "3", explanation: "ูุฌุจ ุฃู ูููู ูุฏูู ูุงุนุฏุฉ ุจูุงูุงุช ูุฑูุฒูุฉ ุตุบูุฑุฉ (ุฃู ููู ุชูููู) ูุชุฎุฒูู ุชูุงุตูู ุงูุงุชุตุงู ููู ูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุตุฉ ุจุงููุณุชุฃุฌุฑูู." },
                        { lines: "6-9", explanation: "ูููู ุงูุชุทุจูู ุจุจูุงุก ุณูุณูุฉ ุงูุงุชุตุงู ุฏููุงูููููุง ุจูุงุกู ุนูู `tenant_id` ุงูุฎุงุต ุจุงููุณุชุฎุฏู ุงูุฐู ูุงู ุจุชุณุฌูู ุงูุฏุฎูู." },
                    ]
                },
                {
                    type: ContentType.PARAGRAPH,
                    text: '<b>ุดุฑุญ ุงูููุฏ:</b> ููุถุญ ูุฐุง ุงูููุฏ ููููุฉ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช ูุฎุชููุฉ ุฏููุงูููููุง ุจูุงุกู ุนูู ูููุฉ ุงููุณุชุฃุฌุฑ. ุฃูููุชู ุชููู ูู ุชูููุฑ ุฃูุตู ุฏุฑุฌุงุช ุงูุนุฒู ูุงูุฃูุงูุ ุญูุซ ุชููู ุจูุงูุงุช ูู ุนููู ูููุตูุฉ ุชูุงููุง. ููุณุชุฎุฏู ูุฐุง ุงููููุฐุฌ ููุนููุงุก ูู ุงููุคุณุณุงุช ุงููุจูุฑุฉ ุฃู ูู ุงูุตูุงุนุงุช ุงูุญุณุงุณุฉ (ูุซู ุงูุฑุนุงูุฉ ุงูุตุญูุฉ) ุงูุชู ูุฏููุง ูุชุทูุจุงุช ุงูุชุซุงู ุตุงุฑูุฉ.'
                },
                { type: ContentType.HEADING4, text: 'ูุชู ุชุฎุชุงุฑ ูุฐุง ุงููููุฐุฌุ' },
                { type: ContentType.LIST_UNORDERED, items: [
                    "<b>ุงูุนููุงุก ูู ุงููุคุณุณุงุช ุงููุจูุฑุฉ (Enterprise):</b> ุงูุฐูู ูุฏููู ูุชุทูุจุงุช ุฃูุงู ุตุงุฑูุฉ.",
                    "<b>ุงูุตูุงุนุงุช ุงูููุธูุฉ:</b> ูุซู ุงูุฑุนุงูุฉ ุงูุตุญูุฉ (HIPAA) ุฃู ุงูุฎุฏูุงุช ุงููุงููุฉ.",
                    "<b>ุนูุฏูุง ูุญุชุงุฌ ูู ุนููู ุฅูู ุฃุฏุงุก ูุฎุตุต ูุบูุฑ ูุชุฃุซุฑ ุจุงูุขุฎุฑูู.</b>",
                ]},
                { type: ContentType.HEADING4, text: 'ุงููุฎุงุทุฑ ุงูุดุงุฆุนุฉ' },
                { type: ContentType.DEFINITION_LIST, definitionItems: [
                    { term: 'ุชูุงููู ุชุดุบูููุฉ ุจุงูุธุฉ', definition: 'ุฅุฏุงุฑุฉ ูุตูุงูุฉ ูุฆุงุช ููุงุนุฏ ุงูุจูุงูุงุช ุชุชุทูุจ ููุงุฑุฏ ุถุฎูุฉ ูุฃุชูุชุฉ ูุชูุฏูุฉ.' },
                    { term: 'ุชุนููุฏ ุงูุชุญุฏูุซุงุช', definition: 'ูุดุฑ ุงูุชุญุฏูุซุงุช ูุชุบููุฑุงุช ุงููุฎุทุท ูุตุจุญ ุนูููุฉ ูุนูุฏุฉ ููุบุงูุฉ ูุชุชุทูุจ ุฃุฏูุงุช ูุชุฎุตุตุฉ.' },
                ]},
            ]
        },
        {
          id: 'part3_ch1_sec4',
          title: 'ุชุญุฏูุฏ ุงููุณุชุฃุฌุฑ (Tenant Identification): ููู ูุนุฑู ุงููุธุงู ูู ุฃูุชุ',
          icon: '๐',
          content: [
            { type: ContentType.PARAGRAPH, text: 'ูุจู ุฃู ูุชููู ูุธุงูู ูู ุนุฒู ุงูุจูุงูุงุชุ ูุฌุจ ุฃู ูุนุฑู ุฃููุงู ูููุฉ ุงููุณุชุฃุฌุฑ ุงูุฐู ููุฏู ุงูุทูุจ. ููุงู ุนุฏุฉ ุทุฑู ุดุงุฆุนุฉ ูุชุญููู ุฐูู.' },
            { type: ContentType.DEFINITION_LIST, definitionItems: [
                { term: '1. ุนุจุฑ ุงููุทุงู ุงููุฑุนู (Subdomain)', definition: '<b>ูุซุงู: `acme.yoursaas.com`</b>. ูุณุชุฎุฑุฌ ุงูุชุทุจูู `acme` ูู ุนููุงู URL ููุณุชุฎุฏูู ูุชุญุฏูุฏ ุงููุณุชุฃุฌุฑ. ูุฐู ูู ุงูุทุฑููุฉ ุงูุฃูุซุฑ ุงุญุชุฑุงููุฉ ูุดููุนูุง ูุชุทุจููุงุช B2B.' },
                { term: '2. ุนุจุฑ ุงููุทุงู ุงููุฎุตุต (Custom Domain)', definition: '<b>ูุซุงู: `tasks.acme.com`</b>. ูุณูุญ ููุนููุงุก ุจุงุณุชุฎุฏุงู ูุทุงูุงุชูู ุงูุฎุงุตุฉุ ููุง ูุนุฒุฒ ุนูุงูุชูู ุงูุชุฌุงุฑูุฉ. ูุชุทูุจ ูุฐุง ุฅุนุฏุงุฏุงุช DNS ูุนูุฏุฉ.' },
                { term: '3. ุนุจุฑ ูุณุงุฑ URL (URL Path)', definition: '<b>ูุซุงู: `yoursaas.com/acme/tasks`</b>. ูุชู ุชุถููู ูุนุฑู ุงููุณุชุฃุฌุฑ ูู ูุณุงุฑ URL. ุฃุจุณุท ูู ุงููุทุงูุงุช ุงููุฑุนูุฉ ูููููุง ุฃูู ุงุญุชุฑุงููุฉ.' },
                { term: '4. ุนุจุฑ ุชููู JWT (JWT Token)', definition: 'ุนูุฏ ุชุณุฌูู ุงูุฏุฎููุ ูุชู ุชุถููู `tenant_id` ุฏุงุฎู ุญูููุฉ (payload) ุชููู ุงููุตุงุฏูุฉ (JWT). ูู ูู ุทูุจ ูุงุญูุ ูููู ุงูุฎุงุฏู ุจูู ุชุดููุฑ ุงูุชููู ูุงุณุชุฎุฑุงุฌ ูุนุฑู ุงููุณุชุฃุฌุฑ. ูุฐู ุทุฑููุฉ ุขููุฉ ูุดุงุฆุนุฉ ุฌุฏูุง.' },
            ]},
            {
              type: ContentType.NOTE,
              title: '๐น ุงูููุฌ ุงููุฌูู ูู ุงูุฃูุถู',
              text: 'ุบุงูุจูุง ูุง ุชุณุชุฎุฏู ุงูุฃูุธูุฉ ุงููููุฉ ููุฌูุง ูุฌูููุง: ูุชู ุงุณุชุฎุฏุงู ุงููุทุงู ุงููุฑุนู ูุชุญุฏูุฏ ุงููุณุชุฃุฌุฑ ูู ุงูุจุฏุงูุฉ (ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู)ุ ูุจุนุฏ ุงููุตุงุฏูุฉ ุงููุงุฌุญุฉุ ูุชู ุงูุงุนุชูุงุฏ ุนูู `tenant_id` ุงููุถูู ูู JWT ูุฌููุน ุทูุจุงุช API ุงููุงุญูุฉ. ูุฐุง ูุฌูุน ุจูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุงูุฌูุฏุฉ ูุงูุฃูุงู ุงูููู.'
            }
          ]
        },
        {
          id: 'part3_ch1_sec5',
          title: 'ุชุตููู ูุงุนุฏุฉ ุงูุจูุงูุงุช: ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุฏุนูุงุช',
          icon: '๐',
          content: [
            { type: ContentType.PARAGRAPH, text: 'ุชุตููู ูุงุนุฏุฉ ุจูุงูุงุช Multi-tenant ูุง ููุชุตุฑ ููุท ุนูู ุนุฒู ุงูุจูุงูุงุชุ ุจู ูุดูู ุฃูุถูุง ุฅุฏุงุฑุฉ ููููุฉ ูุตูู ุงููุณุชุฎุฏููู ุฅูู ุชูู ุงูุจูุงูุงุช ุฏุงุฎู ุงููุณุชุฃุฌุฑ ุงููุงุญุฏ. ูุฐุง ูุชุทูุจ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุฏุนูุงุช.' },
            { type: ContentType.HEADING3, text: 'ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ูุงููุชูุฏูุฉ' },
            { type: ContentType.CODE_BLOCK, language: 'sql', code: `-- ุฌุฏูู ุงููุณุชุฃุฌุฑูู (ุงูุดุฑูุงุช)
CREATE TABLE tenants (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    plan VARCHAR(20) DEFAULT 'basic' -- basic, pro, enterprise
);

-- ุฌุฏูู ุงููุณุชุฎุฏููู
CREATE TABLE users (
    id UUID PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL
);

-- ุฌุฏูู ุงูุฑุจุท ุงูุญุงุณู: ูุญุฏุฏ ุฃู ูุณุชุฎุฏู ููุชูู ุฅูู ุฃู ูุณุชุฃุฌุฑ ูุจุฃู ุฏูุฑ
CREATE TABLE tenant_memberships (
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    tenant_id UUID REFERENCES tenants(id) ON DELETE CASCADE,
    role VARCHAR(20) NOT NULL, -- 'owner', 'admin', 'member'
    PRIMARY KEY (user_id, tenant_id)
);

-- ุฌุฏูู ุงูุฏุนูุงุช
CREATE TABLE invitations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID NOT NULL REFERENCES tenants(id) ON DELETE CASCADE,
    email VARCHAR(255) NOT NULL,
    role VARCHAR(20) NOT NULL,
    token TEXT UNIQUE NOT NULL,
    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,
    status VARCHAR(20) DEFAULT 'pending' -- 'pending', 'accepted'
);` },
            {
                type: ContentType.PARAGRAPH,
                text: '<b>ุดุฑุญ ุงูููุฏ:</b> ููุถุญ ูุฐุง ุงูุชุตููู ุงููุชูุฏู ููููุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุฃุฏูุงุฑ ูุงูุฏุนูุงุช ูู ูุธุงู ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑูู. ุฃูููุชู ุชููู ูู ูุตู ูููุฉ ุงููุณุชุฎุฏู (`users`) ุนู ุนุถููุชู ูู ุดุฑูุฉ (`tenant_memberships`). ูุฐุง ูุณูุญ ูููุณุชุฎุฏู ุงููุงุญุฏ ุจุงูุงูุถูุงู ุฅูู ุนุฏุฉ ูุฑู ุจููุณ ุงูุญุณุงุจุ ููู ุณููุงุฑูู ุดุงุฆุน ุฌุฏูุง. ุฌุฏูู `invitations` ููููู ูู ุจูุงุก ุชุฏูู ุฏุนูุฉ ุขูู ููุงุจู ููุชุชุจุน.'
            },
            { type: ContentType.NOTE, title: 'ููุงุฐุง ูุฐุง ุงูุชุตููู ุฃูุถูุ', text: 'ูุตู ุฌุฏูู `users` ุนู `tenants` ูุงูุณูุงุญ ุจุนูุงูุฉ ูุชุนุฏุฏ ุฅูู ูุชุนุฏุฏ (Many-to-Many) ุนุจุฑ `tenant_memberships` ูุณูุญ ูููุณุชุฎุฏู ุงููุงุญุฏ ุจุฃู ูููู ุนุถููุง ูู ุนุฏุฉ ุดุฑูุงุช (ูุณุชุฃุฌุฑูู) ูุฎุชูููู ุจููุณ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ููู ุณููุงุฑูู ุดุงุฆุน ุฌุฏูุง (ูุซู ูุณุชุดุงุฑ ูุนูู ูุน ุนุฏุฉ ุนููุงุก).' },
             {
              type: ContentType.NOTE,
              title: 'ูุดุฑูุน ุนููู: ุชุฏูู ุงููุตุงุฏูุฉ ุงููุงูู',
              text: 'ูุชุฌุฑุจุฉ ูุฐู ุงูููุงููู ุนููููุงุ ูููุง ุจุฅุนุฏุงุฏ ูุดุฑูุน ุชูุงุนูู ููุถุญ ุชุฏูู ุงูุชุณุฌููุ ุชุณุฌูู ุงูุฏุฎููุ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ. (ููุงุญุธุฉ: ูุชุทูุจ ูุฐุง ุงููุดุฑูุน ุชุดุบูู ุฎุงุฏู ุฎููู ูุตุงุญุจ ุนูู `localhost:5000` ููุนูู ุจุดูู ุตุญูุญ).'
            },
            {
              type: ContentType.PROJECT_AUTH_FLOW,
            },
          ]
        },
        {
          id: 'part3_ch1_sec6',
          title: 'ุงูุฃูุงู ุงููุชูุฏู: ุชุทุจูู ุฃูุงู ูุณุชูู ุงูุตู (Row-Level Security - RLS)',
          icon: '๐ก๏ธ',
          content: [
            { type: ContentType.PARAGRAPH, text: 'ุงูุงุนุชูุงุฏ ุนูู ุงููุทูุฑูู ููุท ูุชุฐูุฑ ุฅุถุงูุฉ `WHERE tenant_id = ?` ูู ูุตูุฉ ููุงุฑุซุฉ. <b>ุฃูุงู ูุณุชูู ุงูุตู (Row-Level Security - RLS)</b> ูู ููุงุนุฏ ุงูุจูุงูุงุช ูุซู PostgreSQL ูู ุดุจูุฉ ุฃูุงู ูููุฉ ุชูุฑุถ ุนุฒู ุงูุจูุงูุงุช ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุณูุง.' },
            { type: ContentType.HEADING3, text: 'ููู ูุนูู RLSุ (ุฎุทูุฉ ุจุฎุทูุฉ)' },
            { type: ContentType.DEFINITION_LIST, definitionItems: [
                { term: '1. ุชูููู RLS ุนูู ุงูุฌุฏูู', definition: 'ุฃููุงูุ ุชููู ุจุชูุนูู ุงูููุฒุฉ ุนูู ุงูุฌุฏูู ุงููุณุชูุฏู. ุจูุฌุฑุฏ ุชูุนูููุงุ ูู ูุชููู ุฃู ูุณุชุฎุฏู (ุญุชู ุงููุงูู) ูู ุฑุคูุฉ ุฃู ุตููู ุงูุชุฑุงุถููุง.' },
                { term: '2. ุฅูุดุงุก ุณูุงุณุฉ (Policy)', definition: 'ุชูุชุจ ุณูุงุณุฉ ุชุญุฏุฏ ุงูุดุฑูุท ุงูุชู ูุฌุจ ุฃู ุชุชุญูู ูุฑุคูุฉ ุตู ูุนูู. ูุฐู ุงูุณูุงุณุฉ ุชุณุชุฎุฏู ูุชุบูุฑุงุช ุงูุฌูุณุฉ (session variables) ุงูุชู ููุฑุฑูุง ุชุทุจููู.' },
                { term: '3. ุชูุฑูุฑ ุงูุณูุงู ูู ุงูุชุทุจูู', definition: 'ูู ุงููุงุฌูุฉ ุงูุฎูููุฉ (Backend)ุ ูุจู ุชูููุฐ ุฃู ุงุณุชุนูุงูุ ุชููู ุจุชุนููู ูุชุบูุฑ ุงูุฌูุณุฉ ุงูุฐู ูุญุชูู ุนูู `tenant_id` ุงูุฎุงุต ุจุงููุณุชุฎุฏู ุงูุญุงูู. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุณุชุฎุฏู ูุฐุง ุงููุชุบูุฑ ูุชุทุจูู ุงูุณูุงุณุฉ ุชููุงุฆููุง.' },
            ]},
            { type: ContentType.CODE_EXPLANATION,
              language: 'sql',
              codeTitle: 'ุณูุงุณุฉ RLS ูุฌุฏูู ุงูููุงู',
              code: `-- 1. ุชูุนูู RLS ุนูู ุฌุฏูู ุงูููุงู
ALTER TABLE tasks ENABLE ROW LEVEL SECURITY;

-- 2. ุฅูุดุงุก ุณูุงุณุฉ ุชูุฑุถ ุนุฒู ุงููุณุชุฃุฌุฑูู
CREATE POLICY tenant_isolation_policy ON tasks
FOR ALL -- ุชูุทุจู ุนูู SELECT, INSERT, UPDATE, DELETE
USING (
    -- ูุงุฑู ุงูุนููุฏ ูู ุงูุฌุฏูู ูุน ูุชุบูุฑ ุงูุฌูุณุฉ
    tenant_id::text = current_setting('app.current_tenant_id', true)
);`,
              explanations: [
                { lines: '2', explanation: 'ุชูุนูู RLS ูููุน ูู ุงููุตูู ุฅูู ุงูุฌุฏูู ุงูุชุฑุงุถููุง ุญุชู ูุชู ุฅูุดุงุก ุณูุงุณุฉ ุชุณูุญ ุจุงููุตูู.' },
                { lines: '5', explanation: 'ูุฐู ุงูุณูุงุณุฉ ุณุชุทุจู ุนูู ูู ุฃููุงุน ุงูุงุณุชุนูุงูุงุช.' },
                { lines: '7-9', explanation: 'ุงูุดุฑุท ุงูุญุงุณู. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณุชุถูู ูุฐุง ุงูุดุฑุท ุชููุงุฆููุง ุฅูู ุฃู ุงุณุชุนูุงู ูุชู ุนูู ุฌุฏูู `tasks`. `current_setting` ูู ุฏุงูุฉ PostgreSQL ุชูุฑุฃ ูุชุบูุฑูุง ุชู ุชุนูููู ูู ุงูุฌูุณุฉ ุงูุญุงููุฉ. ุงูุฎูุงุฑ `true` ูุนูู ุฃูู ูู ูุญุฏุซ ุฎุทุฃ ุฅุฐุง ูู ููู ุงููุชุบูุฑ ููุฌูุฏูุง.' },
              ]
            },
             {
                type: ContentType.PARAGRAPH,
                text: '<b>ุดุฑุญ ุงูููุฏ:</b> ููุถุญ ูุฐุง ุงูููุฏ ููููุฉ ุฅูุดุงุก ุณูุงุณุฉ ุฃูุงู ุนูู ูุณุชูู ุงูุตู (RLS) ูู PostgreSQL. ูุฐู ูู ุขููุฉ ุงูุฃูุงู ุงููุตูู ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑูู. ูุงุฆุฏุชูุง ุฃููุง ุชูุฑุถ ุนุฒู ุงูุจูุงูุงุช ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุณูุงุ ููุง ูุนูู ุฃูู ุญุชู ูู ุงุฑุชูุจ ุงููุทูุฑ ุฎุทุฃู ูู ููุฏ ุงูุชุทุจููุ ูุฅู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณุชููุน ุชุณุฑุจ ุงูุจูุงูุงุช. ุฅููุง ุดุจูุฉ ุฃูุงู ุญุงุณูุฉ ูุชุทุจููุงุช SaaS ุงูุชู ุชุชุนุงูู ูุน ุจูุงูุงุช ุญุณุงุณุฉ.'
            },
            { type: ContentType.CODE_EXPLANATION,
              language: 'python',
              codeTitle: 'ุชุนููู ูุชุบูุฑ ุงูุฌูุณุฉ ูู Python (Flask/SQLAlchemy)',
              code: `from flask import g
from sqlalchemy import text

@app.before_request
def set_tenant_context():
    # ุงูุชุฑุถ ุฃู tenant_id ุชู ุงุณุชุฎุฑุงุฌู ูู JWT
    g.tenant_id = get_tenant_id_from_jwt()

    # ูู ุจุชุนููู ูุชุบูุฑ ุงูุฌูุณุฉ ูู PostgreSQL
    # ุณูุณุชูุฑ ูุฐุง ุงูุฅุนุฏุงุฏ ุทูุงู ูุฏุฉ ุงูุทูุจ ุงูุญุงูู
    if g.tenant_id:
        db.session.execute(
            text("SET app.current_tenant_id = :tenant_id"),
            {"tenant_id": g.tenant_id}
        )
`,
              explanations: [
                { lines: '4', explanation: '`@app.before_request` ูู ููุฒูููู (decorator) ูู Flask ูุถูู ุชุดุบูู ูุฐู ุงูุฏุงูุฉ ูุจู ูู ุทูุจ API.' },
                { lines: '6', explanation: 'ูุชู ุงุณุชุฎุฑุงุฌ ูุนุฑู ุงููุณุชุฃุฌุฑ ูู ุชููู ุงููุตุงุฏูุฉ ูุชุฎุฒููู ูู ุณูุงู ุงูุทูุจ (`g`).' },
                { lines: '10-13', explanation: 'ููุง ูุชู ุชูููุฐ ุฃูุฑ `SET` ูู PostgreSQL ูุชุนููู ูุชุบูุฑ ุงูุฌูุณุฉ. ุงูุขูุ ุฃู ุงุณุชุนูุงู SQLAlchemy ูุงุญู ุฏุงุฎู ูุฐุง ุงูุทูุจ ุณูุฎุถุน ุชููุงุฆููุง ูุณูุงุณุฉ RLS.' },
              ]
            },
            {
                type: ContentType.PARAGRAPH,
                text: '<b>ุดุฑุญ ุงูููุฏ:</b> ููุถุญ ูุฐุง ุงูููุฏ ููู ูููู ุงูุชุทุจูู ุจุฅุจูุงุบ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูููุฉ ุงููุณุชุฃุฌุฑ ุงูุญุงูู ูุจู ูู ุทูุจ. ุฃูููุชู ุชููู ูู ุฃูู "ูููุนูู" ุณูุงุณุฉ RLS ูุชูู ุงูุฌูุณุฉ ุงููุญุฏุฏุฉ. ููุณุชุฎุฏู ูุฐุง ุงูููุฏ ูู "Middleware" ูู ุงููุงุฌูุฉ ุงูุฎูููุฉ ูุถูุงู ุฃู ูู ุงุณุชุนูุงู ูุงุญู ูุชู ุชุตููุชู ุชููุงุฆููุง ุจูุงุณุทุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููุง ูููุฑ ุฃูุงููุง ุดูุงููุง ูููููุง.'
            }
          ]
        },
        {
          id: 'part3_ch1_sec7',
          title: 'ุงูุชูุณุน (Scaling) ูู ูุธุงู Multi-Tenant',
          icon: '๐',
          content: [
            { type: ContentType.PARAGRAPH, text: 'ูุน ููู ูุงุนุฏุฉ ุนููุงุฆูุ ูุฌุจ ุฃู ูููู ูุธุงูู ูุนูุง ุจุณูุงุณุฉ. ุงูุชุฎุทูุท ููุชูุณุน ููุฐ ุงูุจุฏุงูุฉ ูููู ุฃู ูููุฑ ุนููู ุงููุซูุฑ ูู ุงููุชุงุนุจ ูู ุงููุณุชูุจู.' },
            { type: ContentType.HEADING3, text: 'ุงูุชูุณุน ุงูุฃููู (Horizontal Scaling) ููุงุจู ุงูุชูุณุน ุงูุนููุฏู (Vertical Scaling)' },
            { type: ContentType.DEFINITION_LIST, definitionItems: [
                { term: 'ุงูุชูุณุน ุงูุนููุฏู (Vertical Scaling)', definition: 'ุฒูุงุฏุฉ ููุงุฑุฏ ุงูุฎุงุฏู ุงูุญุงูู (ูุซู ุฅุถุงูุฉ ุงููุฒูุฏ ูู CPU ุฃู RAM). ุฅูู ุณูู ููููู ูุญุฏูุฏ ููููู. ุชุตู ุฅูู ููุทุฉ ูุง ููููู ูููุง ุชุฑููุฉ ุงูุฎุงุฏู ุฃูุซุฑ.' },
                { term: 'ุงูุชูุณุน ุงูุฃููู (Horizontal Scaling)', definition: 'ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฎูุงุฏู ุจุฏูุงู ูู ุชุฑููุฉ ุฎุงุฏู ูุงุญุฏ. ูุฐุง ูู ุงูููุฌ ุงูููุถู ูู ุงูุชุทุจููุงุช ุงูุณุญุงุจูุฉ ูุฃูู ูููุฑ ูุฑููุฉ ูุง ููุงุฆูุฉ ุชูุฑูุจูุง ูุฌุงูุฒูุฉ ุนุงููุฉ (High Availability). ูุชุทูุจ ุงุณุชุฎุฏุงู ููุงุฒู ุฃุญูุงู (Load Balancer) ูุชูุฒูุน ุญุฑูุฉ ุงููุฑูุฑ ุจูู ุงูุฎูุงุฏู.' },
            ]},
            { type: ContentType.HEADING3, text: 'ุญู ูุดููุฉ ุงูุฌุงุฑ ุงููุฒุนุฌ (Noisy Neighbor)' },
            { type: ContentType.PARAGRAPH, text: 'ูู ุงูููุงุฐุฌ ุงููุดุชุฑูุฉุ ูููู ุฃู ูุคุซุฑ ูุณุชุฃุฌุฑ ูุงุญุฏ ุณูุก ุงูุฃุฏุงุก ุนูู ุงูุฌููุน. ุฅููู ุจุนุถ ุงูุงุณุชุฑุงุชูุฌูุงุช ููุชุนุงูู ูุน ูุฐุง:' },
            { type: ContentType.LIST_UNORDERED, items: [
                '<b>ุชุญุฏูุฏ ุงููุนุฏู (Rate Limiting):</b> ูู ุจูุฑุถ ุญุฏูุฏ ุนูู ุนุฏุฏ ุทูุจุงุช API ุงูุชู ูููู ูููุณุชุฃุฌุฑ ุฅุฌุฑุงุคูุง ูู ูุชุฑุฉ ุฒูููุฉ ูุนููุฉ (ูุซู 100 ุทูุจ ูู ุงูุฏูููุฉ).',
                '<b>ููุงุฆู ุงูุชุธุงุฑ ูููุตูุฉ (Separate Queues):</b> ููููุงู ุงูุทูููุฉ ุงูุชู ุชุนูู ูู ุงูุฎูููุฉ (ูุซู ุฅูุดุงุก ุงูุชูุงุฑูุฑ ุฃู ุชุตุฏูุฑ ุงูุจูุงูุงุช)ุ ูู ุจูุถุน ููุงู ูู ูุณุชุฃุฌุฑ ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ูููุตูุฉ ูุถูุงู ุนุฏู ุชุฃุฎูุฑ ููุงู ุงูุขุฎุฑูู.',
                '<b>ุนุฒู ุงูููุงุฑุฏ ูููุณุชุฃุฌุฑูู ุงููุจุงุฑ:</b> ููููู ููู ุงููุณุชุฃุฌุฑูู ุงูุฐูู ูุณุชููููู ููุงุฑุฏ ุนุงููุฉ ุฅูู ูุฌููุนุฉ ุฎูุงุฏู ูููุงุนุฏ ุจูุงูุงุช ูุฎุตุตุฉ ููู (ุชุญููููู ุฅูู ูููุฐุฌ ุดุจู ูููุตู).',
            ]},
            { type: ContentType.NOTE, title: 'ุงูุฎูุงุตุฉ', text: 'ุจูุงุก ูุธุงู SaaS ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑูู ูู ุฑุญูุฉ ูู ุงูููุงูุถุงุช. ุงุจุฏุฃ ุจุงูุจุณุงุทุฉ (ูููุฐุฌ ุงูุดูุฉ ุงููุดุชุฑู)ุ ูููู ุตูู ูุธุงูู ูุน ูุถุน ุงูุชูุณุน ูุงูุฃูุงู ูู ุงูุงุนุชุจุงุฑ ููุฐ ุงูููู ุงูุฃูู. ุงุณุชุฎุฏู ุฃุฏูุงุช ูุซู RLS ูุชุฃููู ุจูุงูุงุชูุ ูุฎุทุท ููุชูุณุน ุงูุฃููู ูุถูุงู ููู ุณูุณ ูููุซูู.' }
          ]
        },